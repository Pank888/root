{"version":3,"sources":["../src/headers.js"],"names":[],"mappings":";;;;;;;;AAAA,IAAM,OAAO,SAAP,IAAO,GAAM,EAAN;;;AAGN,IAAM,4BACX,uBAAc,GAAd,EAAmC;sBAAhC,IAAgC;MAAhC,+BAAM,cAA0B;MAAhB,6DAAO,oBAAS;;AACjC,MAAM,MAAM,IAAI,GAAJ,CAAQ,KAAR,KAAkB,YAAlB,CADqB;AAEjC,MAAM,YAAY,IAAI,GAAJ,CAAQ,cAAR,KAA2B,OAA3B,CAFe;AAGjC,MAAM,SAAS,IAAI,GAAJ,CAAQ,QAAR,KAAqB,KAAK,EAAL,GAAU,EAAV,GAAe,CAAf;AAHH,MAI3B,aAAa,IAAI,GAAJ,CAAQ,SAAR,KAAsB,EAAtB,CAJc;;AAMjC,MAAI,UAAU,EAAV,CAN6B;;AAQjC,MAAI,QAAQ,aAAR,EAAuB;AACzB,YAAQ,SAAR,IAAqB,IAAI,IAAJ,CAAS,KAAK,GAAL,KAAc,SAAS,IAAT,CAAvB,CAAuC,WAAvC,EAArB,CADyB;AAEzB,YAAQ,eAAR,yBAA8C,MAA9C,CAFyB;GAA3B;;AAKA,UAAQ,cAAR,IAA0B,SAA1B,CAbiC;AAcjC,UAAQ,QAAR,IAAoB,SAApB,CAdiC;;AAgBjC,yBACK,SACA,WAFL,CAhBiC;;AAqBjC,SAAO,IAAP,CAAY,OAAZ,EAAqB,OAArB,CACE;WACE,IAAI,GAAJ,CAAQ,GAAR,EAAa,QAAQ,GAAR,CAAb;GADF,CADF,CArBiC;;AA0BjC,SA1BiC;CAAnC;;kBA6Ba","file":"headers.js","sourceRoot":"./src/index.js","sourcesContent":["const noop = () => {};\n\n// http header middleware function\nexport const headers =\n  ({ app = {}}, res, next = noop) => {\n    const env = app.get('env') || 'production';\n    const poweredBy = app.get('X-Powered-By') || 'Magic';\n    const maxAge = app.get('maxAge') || 60 * 60 * 24 * 7; // default to 7 days\n    const appHeaders = app.get('headers') || {};\n\n    let headers = {};\n\n    if (env !== 'development') {\n      headers['Expires'] = new Date(Date.now() + (maxAge * 1000)).toUTCString();\n      headers['Cache-Control'] = `public, max-age=${maxAge}`;\n    }\n\n    headers['X-Powered-By'] = poweredBy;\n    headers['server'] = poweredBy;\n\n    headers = {\n      ...headers,\n      ...appHeaders,\n    };\n\n    Object.keys(headers).forEach(\n      key =>\n        res.set(key, headers[key])\n    );\n\n    next();\n  };\n\nexport default headers;\n"]}