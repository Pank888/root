{"version":3,"sources":["../src/headers.js"],"names":[],"mappings":";;;;;;;;AAAA,IAAM,OAAO,SAAP,IAAO,GAAM,CAAE,CAArB;;;AAGO,IAAM,4BACX,uBAAc,GAAd,EAAmC;AAAA,sBAAhC,GAAgC;AAAA,MAAhC,GAAgC,4BAA1B,EAA0B;AAAA,MAAhB,IAAgB,yDAAT,IAAS;;AACjC,MAAM,MAAM,IAAI,GAAJ,CAAQ,KAAR,KAAkB,YAA9B;AACA,MAAM,YAAY,IAAI,GAAJ,CAAQ,cAAR,KAA2B,OAA7C;AACA,MAAM,SAAS,IAAI,GAAJ,CAAQ,QAAR,KAAqB,KAAK,EAAL,GAAU,EAAV,GAAe,CAAnD,C;AACA,MAAM,aAAa,IAAI,GAAJ,CAAQ,SAAR,KAAsB,EAAzC;;AAEA,MAAI,UAAU,EAAd;;AAEA,MAAI,QAAQ,aAAZ,EAA2B;AACzB,YAAQ,SAAR,IAAqB,IAAI,IAAJ,CAAS,KAAK,GAAL,KAAc,SAAS,IAAhC,EAAuC,WAAvC,EAArB;AACA,YAAQ,eAAR,yBAA8C,MAA9C;AACD;;AAED,UAAQ,cAAR,IAA0B,SAA1B;AACA,UAAQ,QAAR,IAAoB,SAApB;;AAEA,yBACK,OADL,EAEK,UAFL;;AAKA,SAAO,IAAP,CAAY,OAAZ,EAAqB,OAArB,CACE;AAAA,WACE,IAAI,GAAJ,CAAQ,GAAR,EAAa,QAAQ,GAAR,CAAb,CADF;AAAA,GADF;;AAKA;AACD,CA5BI;;kBA8BQ,O","file":"headers.js","sourceRoot":"./src/index.js","sourcesContent":["const noop = () => {}\n\n// http header middleware function\nexport const headers =\n  ({ app = {}}, res, next = noop) => {\n    const env = app.get('env') || 'production'\n    const poweredBy = app.get('X-Powered-By') || 'Magic'\n    const maxAge = app.get('maxAge') || 60 * 60 * 24 * 7 // default to 7 days\n    const appHeaders = app.get('headers') || {}\n\n    let headers = {}\n\n    if (env !== 'development') {\n      headers['Expires'] = new Date(Date.now() + (maxAge * 1000)).toUTCString()\n      headers['Cache-Control'] = `public, max-age=${maxAge}`\n    }\n\n    headers['X-Powered-By'] = poweredBy\n    headers['server'] = poweredBy\n\n    headers = {\n      ...headers,\n      ...appHeaders,\n    }\n\n    Object.keys(headers).forEach(\n      key =>\n        res.set(key, headers[key])\n    )\n\n    next()\n  }\n\nexport default headers\n"]}